<!DOCTYPE html>
<html
  lang="en"
  xmlns:th="http://www.thymeleaf.org"
  xmlns="http://www.w3.org/1999/html"
>
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>List Category</title>
    <link href="/webjars/bootstrap/5.1.3/css/bootstrap.min.css" type="text/css"rel="stylesheet"/>
    <script
      type="text/javascript"
      src="/webjars/jquery/3.6.0/jquery.min.js"
    ></script>
    <script src="/webjars/datatables/1.11.4/js/jquery.dataTables.min.js"></script>
    <!-- <link
      type="text/css"
      rel="stylesheet"
      src="/webjars/datatables/1.11.4/css/jquery.dataTables.min.css" />
      -->
    <link th:href="@{/backend/css/sidebar_and_header.css}" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.15/css/jquery.dataTables.min.css" />
  </head>

  <body>
    <div th:replace="backend/fragments/header::header"></div>
         <div id="wrapper">
            <div th:replace="backend/fragments/sidebar::sidebar"> </div>
    
            <div id="page-content-wrapper">

              <div th:if="${successMessage}">
                <div id="success-alert" th:text="${successMessage}" class="alert alert-success" role="alert">
                </div>
              </div>
               
                
                <div class="container-fluid">
                  <a th:href="@{/admin/category/create}" class="btn btn-success mb-2" style="float: right; margin-top: 10px;">Add</a>
                <table id="categoriesTable" class="table table-striped" >
                  <thead>
                    <tr >
                      <th scope="col">No</th>
                      <th scope="col">Name</th>
                      <th scope="col">Description</th>
                      <th scope="col">Action</th>
                    </tr>
                  </thead>
                  <tbody>
            
                  </tbody>
                </table>
                </div>
            </div>
    
        </div>


      
    </div>
    </div>
    
    <script>
      $(document).ready(function () {
        var table = $("#categoriesTable").DataTable({
          sAjaxSource: "/api/admin/categories",
          sAjaxDataProp: "",
          processing: true,

          columns: [
            {mData:"category_id"},
            { mData: "name" },
            { mData: "description" },
            
            {
              mData: null,
              render: function (data, meta, type, full) {
                return (
                  '<a style="margin-right:5px" href="/admin/category/edit/' +
                  data.category_id +
                  '" class="btn btn-warning mr-5" >Edit</a><a id="delete" href="/admin/category/delete/' +
                  data.category_id +
                  '" class="ml-2 btn btn-danger"  >Delete</a>'
                );
              },
            },
          ],
        });

        table
          .on("order.dt search.dt", function () {
            table
              .column(0, { search: "applied", order: "applied" })
              .nodes()
              .each(function (cell, i) {
                cell.innerHTML = i + 1;
              });
          })
          .draw();
      });
    </script>

    <script
      src="/webjars/bootstrap/5.1.3/js/bootstrap.bundle.min.js" type="text/javascript"></script>
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    
    <script type="text/javascript" src="/backend/js/sweetalert2.js"></script>
    <script type="text/javascript" src="/backend/js/alert_label.js"></script>
  
  </body>
</html>
